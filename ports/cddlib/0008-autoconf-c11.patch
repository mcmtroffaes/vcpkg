From 9a6965b119f66bbd0d2b9bae4dcbf90bb7e9727e Mon Sep 17 00:00:00 2001
From: "Matthias C. M. Troffaes" <matthias.troffaes@gmail.com>
Date: Tue, 24 Sep 2024 15:49:04 +0100
Subject: [PATCH] autoconf: check and add C11 support flag.

---
 configure.ac | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/configure.ac b/configure.ac
index 86a2ac0..5b10d07 100644
--- a/configure.ac
+++ b/configure.ac
@@ -34,6 +34,15 @@ case $host_os in
 ;;
 esac
 
+dnl Check for c11 support
+AX_CHECK_COMPILE_FLAG([-std=c11],
+    [AX_APPEND_FLAG([-std=c11])],
+    [AX_CHECK_COMPILE_FLAG([-std:c11],
+        [AX_APPEND_FLAG([-std:c11])],
+        [echo "error: compiler does not support C11"; exit -1]
+    )]
+)
+
 dnl Look for gmp. But do not prepend -lgmp to LIBS as we do not want to link everything against gmp.
 dnl Check for GMP headers and library
 AC_CHECK_HEADER(gmp.h, [
-- 
2.46.0

