From 604af8c673e1e2d7733b896ce9a5c2a0192aad53 Mon Sep 17 00:00:00 2001
From: "Matthias C. M. Troffaes" <matthias.troffaes@gmail.com>
Date: Tue, 24 Sep 2024 19:40:01 +0100
Subject: [PATCH] Fix potential dd_MatrixCanonicalize segfault.

Error could result in freeing of uninitialized pointer.
---
 lib-src/cddlp.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/lib-src/cddlp.c b/lib-src/cddlp.c
index 3f59593..f55f768 100644
--- a/lib-src/cddlp.c
+++ b/lib-src/cddlp.c
@@ -3343,12 +3343,13 @@ dd_rowindex *newpos, dd_ErrorType *error) /* 094 */
    redundancies will be returned by *redset.
 */
   dd_rowrange i,k,m;
-  dd_rowindex newpos1,revpos;
-  dd_rowset redset1;
+  dd_rowindex newpos1=NULL,revpos=NULL;
+  dd_rowset redset1=NULL;
   dd_boolean success=dd_TRUE;
   
   m=(*M)->rowsize;
   set_initialize(redset, m);
+  *error=dd_NoError;
   revpos=(long *)calloc(m+1,sizeof(long));
   
   success=dd_MatrixCanonicalizeLinearity(M, impl_linset, newpos, error);
-- 
2.46.0

